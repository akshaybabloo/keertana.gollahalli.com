<div class="relative border-l border-slate-300 ml-3 space-y-10 pb-8">
    {{ $present := where . "to" "Present" }}
    {{ range sort $present "from" "desc" }}
        <div class="mb-10 ml-8 relative group">
            <span class="absolute flex items-center justify-center w-4 h-4 bg-amber-700 rounded-full -left-[2.55rem] ring-4 ring-[#faf9f6] top-1.5 shadow-sm"></span>
            <div class="flex flex-col sm:flex-row sm:items-baseline sm:justify-between mb-2">
                <h3 class="text-xl font-serif font-bold text-slate-900 group-hover:text-amber-700 transition-colors">{{ .title }}</h3>
                <time class="text-sm font-bold text-amber-700 uppercase tracking-widest mb-1 sm:mb-0">{{ dateFormat "Jan 2006" .from }} - Present</time>
            </div>
            <p class="text-base text-slate-500 font-medium italic mb-3">
                {{ if .where }}{{ .where }},{{ end }} {{ .location }}
            </p>
            {{ if .description }}
                <ul class="list-disc list-outside ml-4 text-slate-600 space-y-2 leading-relaxed">
                    {{ range .description }}
                        <li>{{.}}</li>
                    {{end}}
                </ul>
            {{end}}
        </div>
    {{ end }}

    {{ $noPresent := where . "to" "!=" "Present" }}
    {{ range sort $noPresent "from" "desc" }}
    <div class="mb-10 ml-8 relative group">
        <span class="absolute flex items-center justify-center w-3 h-3 bg-slate-300 rounded-full -left-[2.4rem] ring-4 ring-[#faf9f6] top-2"></span>
        <div class="flex flex-col sm:flex-row sm:items-baseline sm:justify-between mb-2">
            <h3 class="text-lg font-serif font-bold text-slate-800">{{ .title }}</h3>
            <time class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1 sm:mb-0">{{ dateFormat "Jan 2006" .from }} - {{ dateFormat "Jan 2006" .to }}</time>
        </div>
        <p class="text-sm text-slate-500 font-medium italic mb-3">
            {{ if .where }}{{ .where }},{{ end }} {{ .location }}
        </p>
        {{ if .description }}
            <ul class="list-disc list-outside ml-4 text-slate-600 space-y-2 leading-relaxed">
                {{ range .description }}
                    <li>{{.}}</li>
                {{end}}
            </ul>
        {{end}}
    </div>
    {{ end }}
</div>